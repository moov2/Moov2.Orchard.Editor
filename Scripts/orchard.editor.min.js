!function(){var e,t,n,o=function(){for(var e=t.getAnnotations()||[],n=len=e.length;n--;)/doctype first\. Expected/.test(e[n].text)&&e.splice(n,1);len>e.length&&t.setAnnotations(e)},i=function(){e=ace.edit("editor"),t=e.getSession(),n=document.querySelector(".editor-input"),e.setTheme("ace/theme/monokai"),e.setShowPrintMargin(!1),t.setMode("ace/mode/html"),t.setUseWrapMode(!0),t.on("changeAnnotation",o),t.on("change",d),window.addEventListener("editor:valueUpdate",a)},d=function(){n.value=t.getValue()},a=function(){t.setValue(n.value)};document.addEventListener("DOMContentLoaded",i)}(),function(){var e,t,n=27,o=function(e){e.keyCode===n&&d()},i=function(){return document.querySelector("#Body_MediaPath").value},d=function(){c({action:"destroy"}),e.style.display="none",window.removeEventListener("keydown",o)},a=function(){e=document.querySelector(".js-editor-medium"),$input=document.querySelector(".editor-input"),t=document.querySelector(".js-editor-medium-iframe"),document.querySelector(".js-launch-medium-editor").addEventListener("click",r)},u=function(e){"close"===e.data.action&&($input.value=html_beautify?html_beautify(e.data.value):e.data.value,window.dispatchEvent(new Event("editor:valueUpdate")),d())},c=function(e){t.contentWindow.postMessage(JSON.stringify(e),"*")},r=function(){window.addEventListener("keydown",o),c({action:"initialise",value:$input.value,mediaPath:i()}),e.style.display=""};document.addEventListener("DOMContentLoaded",a),window.addEventListener("message",u)}();