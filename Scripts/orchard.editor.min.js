!function(){var e=function(e){var t,n,o,a=function(){for(var e=n.getAnnotations()||[],t=len=e.length;t--;)/doctype first\. Expected/.test(e[t].text)&&e.splice(t,1);len>e.length&&n.setAnnotations(e)},i=function(){return e.querySelector(".editor--ace > textarea")},r=function(){t=ace.edit(i().id),n=t.getSession(),o=e.querySelector(".editor-input"),t.setTheme("ace/theme/monokai"),t.setShowPrintMargin(!1),n.setMode("ace/mode/html"),n.setUseWrapMode(!0),n.on("changeAnnotation",a),n.on("change",u),o.addEventListener("change",d),window.addEventListener("editor:valueUpdate",d)},u=function(){o.value=n.getValue()},d=function(){n.setValue(o.value)};r()},t=function(){for(var t=document.querySelectorAll(".js-editor"),n=0;n<t.length;n++)e(t[n])};document.addEventListener("DOMContentLoaded",t)}(),function(){var e=function(e){var t,n,o,a,i=function(){return document.querySelector(".js-editor-content-type").value},r=function(){var e=document.querySelector("#Title_Title"),t=document.querySelector("#AutoroutePart_CurrentUrl"),n=i(),o="";return e?(o+=t&&t.value?'<a href="/'+t.value+'" target="_blank" title="View current page">'+e.value+"</a>":e.value,n&&"LayoutElement"!==n&&(o+=" ("+n+")"),o||"Unknown"):"HTML Element within Layout"},u=function(){c({action:"destroy"}),window.removeEventListener("message",l),n.style.overflow="",t.style.display="none"},d=function(){t=e.querySelector(".js-editor-medium"),a=e.querySelector(".editor-input"),o=e.querySelector(".js-editor-medium-iframe"),n=document.querySelector("html"),e.querySelector(".js-launch-medium-editor").addEventListener("click",s)},l=function(e){"update"===e.data.action&&(a.value=html_beautify?html_beautify(e.data.value,{wrap_line_length:0}):e.data.value,window.dispatchEvent(new Event("editor:valueUpdate"))),"close"===e.data.action&&u()},c=function(e){o.contentWindow.postMessage(JSON.stringify(e),"*")},s=function(){c({action:"initialise",value:a.value,mediaPath:i(),state:r()}),window.addEventListener("message",l),n.style.overflow="hidden",t.style.display=""};d()},t=function(){for(var t=document.querySelectorAll(".js-editor"),n=0;n<t.length;n++)e(t[n])};document.addEventListener("DOMContentLoaded",t)}();