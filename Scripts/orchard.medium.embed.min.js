!function(){var e,t,n,u,a=!1,i=function(e){return e&&e.endsWith("</p>")||(e+="<p><br /></p>"),e},o=function(){n=document.querySelector(".js-editor-medium-element"),u=document.querySelector(".js-editor-custom-css")},d=function(){return e.serialize()[e.elements[0].id].value},s=function(t){t.value=i(t.value),n.value=t.value,e=new MediumEditor(n),e.subscribe("editableInput",m),""!==u.value&&(e.elements[0].className+=" "+u.value),$(n).mediumInsert({editor:e,addons:{images:!1,embeds:!1,orchardMedia:!0}}),a=!0},r=function(e){var n=JSON.parse(e.data);t=n.id,"update"===n.action&&c(n)},c=function(t){var n=""===t.value;a||s(t),t.value=i(t.value),e.setContent(t.value),n&&v()},l=function(e){window.parent.postMessage(e,"*")},m=function(){l({action:"update",id:t,value:d()})},v=function(){e&&(e.selectElement(e.elements[0]),MediumEditor.selection.moveCursor(document,e.elements[0],0))};document.addEventListener("DOMContentLoaded",o),window.addEventListener("message",r)}();