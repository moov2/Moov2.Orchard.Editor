!function(){var e,t,n,i,u=!1,a=function(e){return e&&e.endsWith("</p>")||(e+="<p><br /></p>"),e},o=function(){n=document.querySelector(".js-editor-medium-element"),i=document.querySelector(".js-editor-custom-css")},d=function(){o(),u||m({action:"init",id:t})},s=function(){return e.serialize()[e.elements[0].id].value},l=function(t){t.value=a(t.value),n.value=t.value,e=new MediumEditor(n),e.subscribe("editableInput",v),""!==i.value&&(e.elements[0].className+=" "+i.value),$(n).mediumInsert({editor:e,addons:{images:!1,embeds:!1,orchardMedia:!0}}),e.elements&&e.elements.length>0&&(e.elements[0].style.display="block"),u=!0},c=function(e){var n=JSON.parse(e.data);t=n.id,"update"===n.action&&r(n)},r=function(t){var n=""===t.value;u||l(t),t.value=a(t.value),e.setContent(t.value),n&&f()},m=function(e){window.parent.postMessage(e,"*")},v=function(){m({action:"update",id:t,value:s()})},f=function(){e&&(e.selectElement(e.elements[0]),MediumEditor.selection.moveCursor(document,e.elements[0],0))};document.addEventListener("DOMContentLoaded",d),window.addEventListener("message",c)}();