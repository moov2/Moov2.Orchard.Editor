!function(){var e,n,t,i,d,o=27,a=function(){w({action:"apply",value:l()})},r=function(){n=document.querySelector(".js-editor-medium-element"),t=document.querySelector(".js-apply-changes"),i=document.querySelector(".js-discard-changes"),d=document.querySelector(".js-state")},c=function(e){e.keyCode===o&&a()},s=function(){e.destroy(),e=void 0,window.removeEventListener("keydown",c)},u=function(){w({action:"discard",value:l()})},l=function(){return e.serialize()[e.elements[0].id].value},m=function(o){window.addEventListener("keydown",c),t.addEventListener("click",a),i.addEventListener("click",u),d.innerHTML=o.state,n.value=o.value,e=new MediumEditor(n),$(n).mediumInsert({editor:e,addons:{images:!1,embeds:!1,orchardMedia:!0}})},v=function(e){var n=JSON.parse(e.data);"initialise"===n.action&&m(n),"destroy"===n.action&&s()},w=function(e){window.parent.postMessage(e,"*")};document.addEventListener("DOMContentLoaded",r),window.addEventListener("message",v)}();