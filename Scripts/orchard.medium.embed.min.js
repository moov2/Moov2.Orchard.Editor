!function(){var e,t,n,u,i=!1,o=function(){n=document.querySelector(".js-editor-medium-element"),u=document.querySelector(".js-editor-custom-css")},d=function(){return e.serialize()[e.elements[0].id].value},a=function(t){t.value=v(t.value),n.value=t.value,e=new MediumEditor(n),e.subscribe("editableInput",l),""!==u.value&&(e.elements[0].className+=" "+u.value),$(n).mediumInsert({editor:e,addons:{images:!1,embeds:!1,orchardMedia:!0}}),i=!0},s=function(e){var n=JSON.parse(e.data);t=n.id,"update"===n.action&&r(n)},r=function(t){return i?(t.value=v(t.value),e.setContent(t.value),void m()):(a(t),void m())},c=function(e){window.parent.postMessage(e,"*")},l=function(){c({action:"update",id:t,value:d()})},m=function(){e&&(e.selectElement(e.elements[0]),MediumEditor.selection.moveCursor(document,e.elements[0],0))},v=function(e){return e.length>0&&!e.endsWith("</p>")&&(e+="<p><br /></p>"),e};document.addEventListener("DOMContentLoaded",o),window.addEventListener("message",s)}();