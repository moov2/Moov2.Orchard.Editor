!function(){var e,n,t,d,i,o,a=27,s=function(){w({action:"apply",value:m()})},c=function(){n=document.querySelector(".js-editor-medium-element"),t=document.querySelector(".js-apply-changes"),d=document.querySelector(".js-discard-changes"),i=document.querySelector(".js-state"),o=document.querySelector(".js-editor-custom-css")},r=function(e){e.keyCode===a&&s()},u=function(){e.destroy(),e=void 0,window.removeEventListener("keydown",r)},l=function(){w({action:"discard",value:m()})},m=function(){return e.serialize()[e.elements[0].id].value},v=function(a){window.addEventListener("keydown",r),t.addEventListener("click",s),d.addEventListener("click",l),i.innerHTML=a.state,n.value=a.value,e=new MediumEditor(n),""!==o.value&&(e.elements[0].className+=" "+o.value),$(n).mediumInsert({editor:e,addons:{images:!1,embeds:!1,orchardMedia:!0}})},y=function(e){var n=JSON.parse(e.data);"initialise"===n.action&&v(n),"destroy"===n.action&&u()},w=function(e){window.parent.postMessage(e,"*")};document.addEventListener("DOMContentLoaded",c),window.addEventListener("message",y)}();